<?php  
	$design_options = array (
		'Background' => array (
			'bgTopColor' => array (
				'default' => 'ccc',
				'type' => 'color',
				'label' => 'Background Top Color',
				'size' => '5',
				'class' => 'gradient color-picker',
				'pre' => '<div class="input-group">',
				'post' => '</div>',
				'pref' => '#',
			),
			'bgBottomColor' => array (
				'default' => 'ffffff',
				'type' => 'color',
				'label' => 'Background Bottom Color',
				'size' => '5',
				'class' => 'gradient color-picker',
				'pre' => '<div class="input-group">',
				'post' => '</div>',
				'pref' => '#',
			),
			'bgBorderBottomSize' => array (
				'default' => '1',
				'type' => 'text',
				'label' => 'Border Bottom Size',
				'size' => '3',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'bgBorderBottomColor' => array (
				'default' => 'cccccc',
				'type' => 'color',
				'label' => 'Border Bottom Color',
				'size' => '5',
				'class' => 'gradient color-picker',
				'pre' => '<div class="input-group">',
				'post' => '</div>',
				'pref' => '#',
			),
			'bgPaddingTop' => array (
				'default' => '10',
				'type' => 'text',
				'label' => 'Padding Top',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'bgPaddingBottom' => array (
				'default' => '10',
				'type' => 'text',
				'label' => 'Padding Bottom',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
		),
		'Left' => array (
			'leftContent' => array (
				'default' => 'Left Text',
				'type' => 'text',
				'label' => 'Content Text',
				'size' => '12',
				'class' => '',
			),
			'leftFontType' => array (
				'default' => 'Helvetica, Arial, sans-serif',
				'type' => 'font',
				'label' => 'Font Type',
				'size' => '8',
				'class' => '',
				'pre' => '',
				'post' => '',
			),
			'leftColor' => array (
				'default' => '999',
				'type' => 'color',
				'label' => 'Color',
				'size' => '5',
				'class' => 'color-picker',
				'pre' => '<div class="input-group">',
				'post' => '</div>',
				'ext' => '',
				'pref' => '#',
			),
			'leftPaddingLeft' => array (
				'default' => '0',
				'type' => 'text',
				'label' => 'Padding Left',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'leftPaddingRight' => array (
				'default' => '0',
				'type' => 'text',
				'label' => 'Padding Right',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'leftFontSize' => array (
				'default' => '14',
				'type' => 'text',
				'label' => 'Font Size',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'leftFontWeight' => array (
				'default' => '400',
				'type' => 'weight',
				'label' => 'Font Weight',
				'size' => '5',
				'class' => '',
				'pre' => '',
				'post' => '',
				'ext' => '',
			),
			'leftTextShadow' => '',
		),
		'Middle' => array (
		),
		'Right' => array (
			'rightContent' => array (
				'default' => 'Right Text',
				'type' => 'text',
				'label' => 'Content Text',
				'size' => '12',
				'class' => '',
			),
			'rightFontType' => array (
				'default' => 'Helvetica, Arial, sans-serif',
				'type' => 'font',
				'label' => 'Font Type',
				'size' => '8',
				'class' => '',
				'pre' => '',
				'post' => '',
			),
			'rightColor' => array (
				'default' => '999',
				'type' => 'color',
				'label' => 'Color',
				'size' => '5',
				'class' => 'color-picker',
				'pre' => '<div class="input-group">',
				'post' => '</div>',
				'ext' => '',
				'pref' => '#',
			),
			'rightPaddingLeft' => array (
				'default' => '0',
				'type' => 'text',
				'label' => 'Padding Left',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'rightPaddingRight' => array (
				'default' => '0',
				'type' => 'text',
				'label' => 'Padding Right',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'rightFontSize' => array (
				'default' => '14',
				'type' => 'text',
				'label' => 'Font Size',
				'size' => '5',
				'class' => '',
				'pre' => '<div class="input-group">',
				'post' => '<span class="input-group-addon">px</span></div>',
				'ext' => 'px',
			),
			'rightFontWeight' => array (
				'default' => '400',
				'type' => 'weight',
				'label' => 'Font Weight',
				'size' => '5',
				'class' => '',
				'pre' => '',
				'post' => '',
				'ext' => '',
			),
			'rightTextShadow' => '',
		),
		'Display' => array (
		),
		'Premade' => array (
			
		),
	);
	$design_settings = array ();

	if ($success_message && trim($success_message) != '') {
		?>
		<div class="alert alert-success" style="text-align:center"><?php echo $success_message ?></div>
		<?php
	}
	
/*
	Everything you need should be saved in $bar_data now! :)
*/

?>
<h3><span class="glyphicon glyphicon-edit" style="margin-right:5px"></span> Editing <span class="text-info"><?php echo $bar_name ?></span></h3>
<?php echo form_open('bar/process_bar', array('id'=>"editBarForm")); ?>
<style type="text/css">
#optionsList {
	height:550px;
	overflow-y: scroll;
}
.barForm {
    display: inline;    
}
.barForm input[type="text"], .barForm input[type="submit"] {
	display: inline-block;
	padding: 6px;
	font-size: 13px;
	line-height: 18px;
	color: #555555;
	border: 1px solid #cccccc;
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	border-radius: 3px;
	font-weight: normal;
	line-height: normal;
}
.barForm input[type="submit"] {
	font-family: 'Helvetica Neue', Helvetica, sans-serif;
	font-size: 14px;
}

.bar-preview {
	width: 100%;
}
.barskin {
	width: 100%;
	text-align: center;
}
.barSkinSpan {
	display: inline-block;
}
.tab-content {
	margin-top: 25px;
}
</style>
<script type="text/javascript">
jQuery(document).ready(function ($) {
	
	
	$('#editBarForm').submit(function () {
		var barHeight = $('.barskin').outerHeight();
		$('#barHeightIn').val(barHeight);
		return true;
	});
	var self = $('.barskin');
	$scope = angular.element(self).scope();
	$('.gradient').keyup(function () {
		$scope.$apply(function () {
			$scope.bgStyle = "background-color:"+$scope.bgTopColor+";background-image: -webkit-gradient(linear, left top, left bottom, from("+$scope.bgTopColor+"), to("+$scope.bgBottomColor+"));background-image:-moz-linear-gradient(top, #"+$scope.bgTopColor+" 0%, "+$scope.bgBottomColor+");background-image:-webkit-linear-gradient(top, "+$scope.bgTopColor+" 0%, "+$scope.bgBottomColor+");background-image:-ms-linear-gradient(top, #"+$scope.bgTopColor+", "+$scope.bgBottomColor+");background-image:-o-linear-gradient(top, #"+$scope.bgTopColor+", "+$scope.bgBottomColor+");background-image:linear-gradient(to bottom, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");";
		});
	});
	
	$scope.$apply(function () {	
		$scope.barHeight = $('.barskin').outerHeight();
		$scope.bgStyle = "background-color:"+$scope.bgTopColor+";background-image: -webkit-gradient(linear, left top, left bottom, from("+$scope.bgTopColor+"), to("+$scope.bgBottomColor+"));background-image:-moz-linear-gradient(top, "+$scope.bgTopColor+" 0%, "+$scope.bgBottomColor+");background-image:-webkit-linear-gradient(top, "+$scope.bgTopColor+" 0%,"+$scope.bgBottomColor+");background-image:-ms-linear-gradient(top, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");background-image:-o-linear-gradient(top, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");background-image:linear-gradient(to bottom, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");";
	});
		
	
	$('#optionsTabs a').click(function (e) {
		$(this).tab('show');
  });
  function updateMiddleContent() {
	  var contentType = $('input[name=middleContentType]:checked', 'form').val()
	  if (contentType == 'link') {
	  	$('.barForm').hide();
	  	$('.barLink').show();
		$('.formProviderWrapper').hide();
		$('.linkContentWrapper').show();
	  } else {
	  	$('.barLink').hide();
	  	$('.barForm').show();
		$('.linkContentWrapper').hide();
		$('.formProviderWrapper').show();
	  }
  }
  updateMiddleContent();
  $('.middleContentType').change(updateMiddleContent);
});
function barCreate($scope) {
	$scope.$watch("barCreate", function() {
		$scope.leftStyle = function () {
			if ($scope.leftTextShadowRight != 0 &&
				$scope.leftTextShadowBottom != 0 &&
				$scope.leftTextShadowColor != 0) {
					var leftTextShadow = $scope.leftTextShadowRight + 'px ' + $scope.leftTextShadowBottom + 'px ' + $scope.leftTextShadowLeft + 'px ' + $scope.leftTextShadowColor;
			} else {
					var leftTextShadow = 'none';
			}
			return {
				color: $scope.leftColor,
				paddingRight: $scope.leftPaddingRight + 'px',
				paddingLeft: $scope.leftPaddingLeft + 'px',
				fontSize: $scope.leftFontSize + 'px',
				fontFamily: $scope.leftFontType,
				fontWeight: $scope.leftFontWeight,
				textShadow: leftTextShadow,
			}
		};
		$scope.rightStyle = function () {
			if ($scope.rightTextShadowRight != 0 &&
				$scope.rightTextShadowBottom != 0 &&
				$scope.rightTextShadowColor != 0) {
					var rightTextShadow = $scope.rightTextShadowRight + 'px ' + $scope.rightTextShadowBottom + 'px ' + $scope.rightTextShadowLeft + 'px ' + $scope.rightTextShadowColor;
			} else {
					var rightTextShadow = 'none';
			}
			return {
				color: $scope.rightColor,
				paddingRight: $scope.rightPaddingRight + 'px',
				paddingLeft: $scope.rightPaddingLeft + 'px',
				fontSize: $scope.rightFontSize + 'px',
				fontFamily: $scope.rightFontType,
				fontWeight: $scope.rightFontWeight,
				textShadow: rightTextShadow,
			}
		};
		$scope.linkStyle = function() {
			if ($scope.linkTextShadowRight != 0 &&
				$scope.linkTextShadowBottom != 0 &&
				$scope.linkTextShadowColor != 0) {
					var linkTextShadow = $scope.linkTextShadowRight + 'px ' + $scope.linkTextShadowBottom + 'px ' + $scope.linkTextShadowLeft + 'px ' + $scope.linkTextShadowColor;
			} else {
					var linkTextShadow = 'none';
			}
			return { 
				color: $scope.linkColor,
				fontSize: $scope.linkSize + 'px',
				fontFamily: $scope.linkFontType,
				fontWeight: $scope.linkFontWeight,
				textShadow: linkTextShadow,
			}
		};
		$scope.bgNgStyle = function () {
			return {
				paddingTop: $scope.bgPaddingTop + 'px',
				paddingBottom: $scope.bgPaddingBottom + 'px',
				borderBottomWidth: $scope.bgBorderBottomSize + 'px',
				borderBottomColor: $scope.bgBorderBottomColor,
				borderBottomStyle: 'solid',
			}
		};
		$scope.btnStyle = function () {
			return {
				color: $scope.buttonTextColor,
				backgroundColor: $scope.buttonColor,
				fontFamily: $scope.buttonFontType,
				borderStyle: 'solid',
				borderWidth: '1px',
				borderColor: $scope.buttonBorderColor,
				'border-radius': $scope.buttonBorderRadius + 'px',
				'-moz-border-radius': $scope.buttonBorderRadius + 'px',
				'-webkit-border-radius': $scope.buttonBorderRadius + 'px',
				paddingTop: $scope.buttonVerticalPadding + 'px',
				paddingBottom: $scope.buttonVerticalPadding + 'px',
				fontSize: $scope.buttonFontSize + 'px',
				paddingLeft: $scope.buttonHorizontalPadding + 'px',
				paddingRight: $scope.buttonHorizontalPadding + 'px',
			}
		};
	});
}
</script>
<div class="clear"></div>
<h4 class="lead">Preview</h4>
<div class="bar-create-panel-wrapper" ng-app>
<div class="bar-create-panel" ng-controller="barCreate">
<div class="bar-preview-wrapper ng-cloak" style="{{bgStyle}}" >
	<div class="bar-preview barskin" ng-style="bgNgStyle()">
		<div class="barSkinSpan" ng-style="leftStyle()">{{leftContent}}</div>
		<div class="barSkinSpan barForm">
                <input type="text" placeholder="{{namePlaceholder}}" name="name">
                <input type="text" placeholder="{{emailPlaceholder}}" id="previewName" name="email" <?php if ($bar_properties['includeName'] != 'yes') { echo 'style="display:none;"'; } ?>> <input ng-style="btnStyle()" type="submit" value="{{buttonText}}">
		</div>
		<div class="barSkinSpan barLink" style="display:none;"><a href="{{linkLocation}}" ng-style="linkStyle()">{{linkText}}</a></div>
		<div class="barSkinSpan" ng-style="rightStyle()">{{rightContent}}</div>
	</div>
</div>
<div class="pull-right">
	<input type="hidden" name="bar_id" value="<?php echo $bar_id ?>" />
	<input type="hidden" name="bar_height" id="barHeightIn" value="0" />
</div>
<div id="optionsList">
<h4 class="lead" style="margin-top:20px;">Options</h4>
<div class="container">
<div class="bar-settings">
<div class="bar-design-settings col-md-12">

<?php if (!empty($design_options)) { ?>
	<ul id="optionsTabs" class="nav nav-tabs">
	<?php foreach ($design_options as $cat=>$options) { ?>
		<li <?php if ($cat == 'Background') { echo 'class="active"'; } ?>><a href="#<?php echo $cat ?>" data-toggle="tab"><?php 
			echo $cat; if ($cat == 'Left' || $cat == 'Middle' || $cat == 'Right')  {
				echo ' Content';
			} else if ($cat == 'Display') {
				echo ' Settings';
			} else if ($cat = 'Premade') {
				echo ' Styles';
			}
		?></a></li>
	<?php } ?>
	</ul>
	<?php }
	if (!empty($design_options)) { ?>
	<div class="tab-content">
	<?php foreach ($design_options as $cat=>$options) { 
		$halfway = round(count($options)/2);
		$num = 1;
	?>
	<div class="tab-pane <?php if ($cat=='Background') { echo 'active'; } ?>" id="<?php echo $cat ?>">
		<?php if ($cat != 'Middle' && $cat != 'Display' && $cat != 'Premade') { ?>
			<div class="col-md-6">
		<?php foreach ($options as $o=>$i) {
			if ($o == 'bgTopColor') { ?>
				<legend style="font-size:17px;">Background Colors</legend>
				<div class="help-block" style="margin-top:-10px;margin-bottom:15px;">
Your bar can have a background color gradient from top to bottom, to give it an awesome style. Choose your top and bottom colors below.</div>
			<?php } else if ($o == 'bgPaddingTop') { ?>
				<legend style="font-size:17px;">Bar Padding</legend>
				<div class="help-block" style="margin-top:-10px;margin-bottom:15px;">
				The options below control how much space there is between the top of your bar, the content, and the bottom of the bar. This affects the size of the bar!
				</div>
			<?php } else if ($o == 'bgBorderBottomSize') { ?>
				<legend style="font-size:17px;">Bottom Border</legend>
				<div class="help-block" style="margin-top:-10px;margin-bottom:15px;">
				You can create a little border at the bottom of your bar, to give it a feeling of separation from the rest of your page. You can turn this off by setting the size to 0.
				</div>
			<?php }
			// Just some custom work for text shadowing:
			if ($o == 'leftTextShadow' || $o == 'rightTextShadow' ||
					$o == 'linkTextShadow' ) { 
				$pos = explode('TextShadow', $o);
				$pos = $pos[0];
				$shadowColor = $bar_properties[$pos . 'TextShadowColor'];
				$shadowSizeRight = $bar_properties[$pos . 'TextShadowRight'];
				$shadowSizeBottom = $bar_properties[$pos . 'TextShadowBottom'];
				$shadowSizeLeft = $bar_properties[$pos . 'TextShadowLeft'];
					?>
			<legend style="font-size:17px;">Text Shadow</legend>
				<div class="help-block" style="margin-top:-10px;margin-bottom:15px;">
You can create an awesome shadow around your text. Try setting the three position settings to 1, 1, 1.</div>
			<div class="form-group row">
				<label class="form-label col-md-12">Text Shadow Color</label>
				<div class="col-md-5">
				<div class="input-group">
				<input type="text" ng-init="<?php echo "{$pos}TextShadowColor='$shadowColor'" ?>" ng-model="<?php echo $pos ?>TextShadowColor" class="form-control color-picker" name="<?php echo $pos ?>TextShadowColor" value="<?php echo $shadowColor ?>">
				<span style="display:none;" id="colorpicker-hide-<?php echo $pos ?>TextShadowColor" class="input-group-addon" href="#">
							<a href="#" data-model="<?php echo $pos ?>TextShadowColor" class="close colorpicker-hide glyphicon glyphicon-ok" style="padding-top:2px;padding-bottom:2px;"></a>
				</span>
				</div>
				</div>
				<div id="open-picker-<?php echo $pos ?>TextShadowColor"></div>
			</div>
			<div class="form-group row">
				<label class="form-label col-md-12">Text Shadow Position</label>
				<div class="col-md-12">
					<div class="col-md-4">
						<label class="form-label">Horizontal</label>
						<div class="input-group">
						<input type="text" 
							ng-init="<?php echo "{$pos}TextShadowRight='$shadowSizeRight'" ?>" ng-model="<?php echo $pos ?>TextShadowRight" class="form-control" name="<?php echo $pos ?>TextShadowRight" value="<?php echo $shadowSizeRight ?>">
							<span class="input-group-addon">px</span>
						</div>
					</div>
					<div class="col-md-4">
						<label class="form-label">Vertical</label>
						<div class="input-group">
						<input type="text" ng-init="<?php echo "{$pos}TextShadowBottom='$shadowSizeBottom'" ?>" ng-model="<?php echo $pos ?>TextShadowBottom"
							class="form-control" name="<?php echo $pos ?>TextShadowBottom" value="<?php echo $shadowSizeBottom ?>">
							<span class="input-group-addon">px</span>
						</div>
					</div>
					<div class="col-md-4">
						<label class="form-label">Blur</label>
						<div class="input-group">
						<input type="text" ng-init="<?php echo "{$pos}TextShadowLeft='$shadowSizeLeft'" ?>" ng-model="<?php echo $pos ?>TextShadowLeft"
							class="form-control" name="<?php echo $pos ?>TextShadowLeft" value="<?php echo $shadowSizeLeft ?>">
							<span class="input-group-addon">px</span>
						</div>
					</div>
				</div>
			</div>
				
			<?php } else {
			$v = $bar_properties[$o];
			if (isset($i['pre'])) {
				$pre = $i['pre'];
			} else {
				$pre = '';
			}
			if (isset($i['post'])) {
				$post = $i['post'];
			} else {
				$post = '';
			}
			if (isset($i['pref'])) {
				$pref = $i['pref'];
			} else {
				$pref = '';
			}
			if (isset($i['ext'])) {
				$ext = $i['ext'];
			} else {
				$ext = '';
			}
			
			?>
			<div class="form-group row">
				<?php
				if ($i['type'] != 'checkbox') { ?>
				<label class="form-label col-md-12"><?php echo $i['label'] ?></label>
				<div class="col-md-<?php echo $i['size'] ?>">
					<?php
					echo $pre;
					if ($i['type'] == 'text' || $i['type'] == 'color') { 
					?>
						<input type="text" ng-init="<?php echo "$o='$v'" ?>" ng-model="<?php echo $o ?>" name="<?php echo $o ?>" value="<?php echo $v ?>" class="form-control <?php echo $i['class'] ?>" value="<?php echo $v ?>" />
					<?php if ($i['type'] == 'color') { ?>
						<span style="display:none;" id="colorpicker-hide-<?php echo $o ?>" class="input-group-addon" href="#">
							<a href="#" data-model="<?php echo $o ?>" class="close colorpicker-hide glyphicon glyphicon-ok" style="padding-top:2px;padding-bottom:2px;"></a>
						</span>
					<?php } ?>
					<?php echo $post; 
						if ($i['type'] == 'color') { ?>
							<div id="open-picker-<?php echo $o ?>"></div>
						<?php }
					} else if ($i['type'] == 'font') {
						
						echo form_dropdown($o, $font_list_nice, $v, 'class="form-control" ng-model="'.$o.'" ng-init="'.$o.'=\''.$v.'\'"');
					} else if ($i['type'] == 'weight') {
						$weights = array ( 100,200,300,400,500,600,700,800 );
						$weight_list = array();
						foreach ($weights as $w) {
							$weight_list[$w] = $w;
						}
						echo form_dropdown($o, $weight_list, $v, 'class="form-control" ng-model="'.$o.'" ng-init="'.$o.'=\''.$v.'\'"');
					}

					?>
				</div>
				<?php } ?>
			</div>
			<?php }
			if ($num == $halfway) {
				?>
				</div><!-- .col-md-4 -->
				<div class="col-md-6">
				<?php
			} else if ($num == count($options)) {
				?>
				</div> <!-- .col-md-4 -->
				<?php
			}
			$num++;
		}
		?>
		<?php
		} else if ($cat == 'Middle') { 
			$data['ld'] = $bar_properties;
			
		?>
		<div class="form-group col-md-12">
			<label class="form-label col-md-2">Middle Content Type</label>
			<div class="col-md-7" style="margin-bottom:20px;">
				<label class="col-md-2">
					<input type="radio" class="middleContentType" name="middleContentType" value="form" <?php if ($bar_properties['middleContentType'] == 'form') { echo 'checked="checked"'; } ?> /> Form
				</label>
				<label class="col-md-2">
					<input type="radio" class="middleContentType" name="middleContentType" value="link" <?php if ($bar_properties['middleContentType'] == 'link') { echo 'checked="checked"'; } ?> /> Link
				</label>
			</div>
		</div>
			<div class="formProviderWrapper col-md-12" style="">
			<?php $this->load->view('bar/form_providers', $data); ?>
			</div>
			<div class="linkContentWrapper col-md-12" style="display:none;">
			<?php
				
				$data['font_list_nice'] = $font_list_nice;
				$this->load->view('bar/link_content', $data); ?>
			</div>
		<?php } else if ($cat == 'Display') {
				$data['ld'] = $bar_properties;
				$this->load->view('bar/display_options', $data);
		}  else if ($cat == 'Premade') {
			?>
			<div class="lead" style="font-size:15px">You can apply any of our premade styles. These will override your current design settings.</div>
			<div class="form-group">
				<label class="form-label col-md-2">Select Style</label>
				<div class="col-md-4">
					<select id="customStyle" class="form-control">
						
					
			<?php
			$premade_style_options = array(
				'custom' => 'Your custom design',
				'barskin1' => 'barskin1',
				'barskin2' => 'barskin2',
				'bigTwitterFollow' => 'Big Follow Us Blue',
				'bigTwitterFollowPink' => 'Big Follow Us Pink',
				'facebook' => 'Facebook',
				'twitter2' => 'Twitter',
				'twitter' => 'Twitter Corp',
				'instagram' => 'Instagram',
				'pandora' => 'Pandora',
				'bootstrap' => 'Bootstrap Purple',
			);
			$premade_styles = array (
				'custom' => array (),
				'barskin1' => array (
					'bgTopColor' => '#f9f9f9',
					'bgBottomColor' => '#dddddd',
					'bgBorderBottomSize' => '1',
					'bgBorderBottomColor' => '#dadada',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica, Arial, sans-serif',
					'leftColor' => '#333333',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '15',
					'leftFontSize' => '15',
					'leftFontWeight' => '300',
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Helvetica, Arial, sans-serif',
					'rightFontWeight' => '300',
					'rightColor' => '#333333',
					'rightPaddingLeft' => '15',
					'rightPaddingRight' => '0',
					'rightFontSize' => '15',
					'linkColor' => '#428bca',
					'linkFontType' => 'Helvetica, Arial, sans-serif',
					'linkSize' => '14',
					'rightFontWeight' => '300',
					'buttonColor' => '#ffffff',
					'buttonTextColor' => '#555555',
					'buttonBorderRadius' => '3',
					'buttonBorderColor' => '#cccccc',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'barskin2' => array (
					'bgTopColor' => '#357ebd',
					'bgBottomColor' => '#357ebd',
					'bgBorderBottomSize' => '0',
					'bgBorderBottomColor' => '#357ebd',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica Neue, sans-serif',
					'leftColor' => '#ffffff',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '17',
					'leftFontWeight' => '400',
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Helvetica Neue, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#ffffff',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#428bca',
					'linkFontType' => 'Helvetica Neue, sans-serif',
					'linkSize' => '17',
					'rightFontWeight' => '400',
					'buttonColor' => '#ffffff',
					'buttonTextColor' => '#000000',
					'buttonBorderRadius' => '3',
					'buttonFontSize' => '15',
					'buttonBorderColor' => '#eeeeee',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'bigTwitterFollow' => array (
					'bgTopColor' => '#428bca',
					'bgBottomColor' => '#428bca',
					'bgBorderBottomSize' => '1',
					'bgBorderBottomColor' => '#357ebd',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica Neue, sans-serif',
					'leftColor' => '#ffffff',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '36',
					'leftFontWeight' => '400',
					'leftContent' => 'Follow us on Twitter',
					'leftTextShadowColor' => '#2e6ca3',
					'leftTextShadowRight' => '2',
					'leftTextShadowBottom' => '3',
					'leftTextShadowLeft' => '1',
					'linkText' => '@yourtwitter',
					'linkLocation' => 'http://twitter.com/yourtwitter',
					'linkTextShadowColor' => '#347cba',
					'linkTextShadowRight' => '2',
					'linkTextShadowBottom' => '3',
					'linkTextShadowLeft' => '1',
					
					'rightFontType' => 'Helvetica Neue, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#ffffff',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#ffffff',
					'linkFontType' => 'Helvetica Neue, sans-serif',
					'linkSize' => '26',
					'rightFontWeight' => '400',
					'buttonColor' => '#ffffff',
					'buttonTextColor' => '#000000',
					'buttonBorderRadius' => '3',
					'buttonFontSize' => '15',
					'buttonBorderColor' => '#eeeeee',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'bigTwitterFollowPink' => array (
					'bgTopColor' => '#de495b',
					'bgBottomColor' => '#de495b',
					'bgBorderBottomSize' => '1',
					'bgBorderBottomColor' => '#d13b4d',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica Neue, sans-serif',
					'leftColor' => '#ffffff',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '36',
					'leftFontWeight' => '400',
					'leftContent' => 'Follow us on Twitter',
					'leftTextShadowColor' => '#d13b4d',
					'leftTextShadowRight' => '2',
					'leftTextShadowBottom' => '3',
					'leftTextShadowLeft' => '1',
					'linkText' => '@yourtwitter',
					'linkLocation' => 'http://twitter.com/yourtwitter',
					'linkTextShadowColor' => '#d13b4d',
					'linkTextShadowRight' => '2',
					'linkTextShadowBottom' => '3',
					'linkTextShadowLeft' => '1',
					
					'rightFontType' => 'Helvetica Neue, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#ffffff',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#ffffff',
					'linkFontType' => 'Helvetica Neue, sans-serif',
					'linkSize' => '26',
					'rightFontWeight' => '400',
					'buttonColor' => '#ffffff',
					'buttonTextColor' => '#000000',
					'buttonBorderRadius' => '3',
					'buttonFontSize' => '15',
					'buttonBorderColor' => '#eeeeee',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'pandora' => array (
					'bgTopColor' => '#002e60',
					'bgBottomColor' => '#022044',
					'bgBorderBottomSize' => '0',
					'bgBorderBottomColor' => '#022044',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica, Arial, sans-serif',
					'leftColor' => '#f7fafb',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '17',
					'leftFontWeight' => '400',
					
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Helvetica, Arial, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#f7fafb',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					
					
					'linkColor' => '#428bca',
					'linkFontType' => 'Helvetica, Arial, sans-serif',
					'linkSize' => '17',
					'linkFontWeight' => '400',
					'buttonColor' => '#f7fafb',
					'buttonTextColor' => '#022044',
					'buttonBorderRadius' => '3',
					'buttonBorderColor' => '#022044',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'twitter' => array (
					'bgTopColor' => '#00a0d1',
					'bgBottomColor' => '#008db8',
					'bgBorderBottomSize' => '0',
					'bgBorderBottomColor' => '#022044',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica, Arial, sans-serif',
					'leftColor' => '#f7fafb',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '17',
					'leftFontWeight' => '400',
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Helvetica, Arial, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#f7fafb',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#ffffff',
					'linkFontType' => 'Helvetica, Arial, sans-serif',
					'linkSize' => '17',
					'linkFontWeight' => '400',
					'buttonColor' => '#0084b4',
					'buttonTextColor' => '#ffffff',
					'buttonBorderRadius' => '3',
					'buttonBorderColor' => '#0084b4',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'twitter2' => array (
					'bgTopColor' => '#2d2d2d',
					'bgBottomColor' => '#3d3d3d',
					'bgBorderBottomSize' => '1',
					'bgBorderBottomColor' => '#222222',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica Neue, sans-serif',
					'leftColor' => '#f7fafb',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '17',
					'leftFontWeight' => '400',
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Helvetica Neue, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#f7fafb',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#428bca',
					'linkFontType' => 'Helvetica Neue, sans-serif',
					'linkSize' => '17',
					'linkFontWeight' => '400',
					'buttonColor' => '#222222',
					'buttonTextColor' => '#ffffff',
					'buttonBorderRadius' => '3',
					'buttonFontSize' => '15',
					'buttonBorderColor' => '#022044',
					'buttonHorizontalPadding' => '6',
					'buttonVerticalPadding' => '6',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'bootstrap' => array (
					'bgTopColor' => '#563d7c',
					'bgBottomColor' => '#563d7c',
					'bgBorderBottomSize' => '0',
					'bgBorderBottomColor' => '#022044',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica, Arial, sans-serif',
					'leftColor' => '#f7fafb',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '17',
					'leftFontWeight' => '400',
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Helvetica, Arial, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#f7fafb',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#428bca',
					'linkFontType' => 'Helvetica, Arial, sans-serif',
					'linkSize' => '17',
					'linkFontWeight' => '400',
					'buttonColor' => '#563d7c',
					'buttonTextColor' => '#ffffff',
					'buttonBorderRadius' => '5',
					'buttonBorderColor' => '#ffffff',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
				),
				'instagram' => array (
					'bgTopColor' => '#517fa4',
					'bgBottomColor' => '#306088',
					'bgBorderBottomSize' => '1',
					'bgBorderBottomColor' => '1c5380',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Helvetica, Arial, sans-serif',
					'leftColor' => '#ffffff',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '17',
					'leftFontWeight' => '400',
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Helvetica Neue, sans-serif',
					'rightFontWeight' => '400',
					'rightColor' => '#ffffff',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#428bca',
					'linkFontType' => 'Helvetica Neue, sans-serif',
					'linkSize' => '17',
					'linkFontWeight' => '400',
					'buttonColor' => '#517fa4',
					'buttonTextColor' => '#ffffff',
					'buttonBorderRadius' => '3',
					'buttonFontType' => 'Helvetica Neue, sans-serif',
					'buttonBorderColor' => '#1c5380',
					'buttonHorizontalPadding' => '5',
					'buttonVerticalPadding' => '5',
				),
				'facebook' => array (
					'bgTopColor' => '#3b5998',
					'bgBottomColor' => '#3b5998',
					'bgBorderBottomSize' => '1',
					'bgBorderBottomColor' => '1c5380',
					'bgPaddingTop' => '10',
					'bgPaddingBottom' => '10',
					'leftFontType' => 'Lucida Grande',
					'leftColor' => '#ffffff',
					'leftPaddingLeft' => '0',
					'leftPaddingRight' => '20',
					'leftFontSize' => '17',
					'leftFontWeight' => '400',
					// Text Shadow
					'leftTextShadowColor' => '#ffffff',
					'leftTextShadowRight' => '0',
					'leftTextShadowBottom' => '0',
					'leftTextShadowLeft' => '0',
					'rightTextShadowColor' => '#ffffff',
					'rightTextShadowRight' => '0',
					'rightTextShadowBottom' => '0',
					'rightTextShadowLeft' => '0',
					'linkTextShadowColor' => '#ffffff',
					'linkTextShadowRight' => '0',
					'linkTextShadowBottom' => '0',
					'linkTextShadowLeft' => '0',
					
					'rightFontType' => 'Lucida Grande',
					'rightFontWeight' => '400',
					'rightColor' => '#ffffff',
					'rightPaddingLeft' => '20',
					'rightPaddingRight' => '0',
					'rightFontSize' => '17',
					'linkColor' => '#428bca',
					'linkFontType' => 'Lucida Grande',
					'linkSize' => '17',
					'linkFontWeight' => '400',
					'buttonColor' => '5b74a8',
					'buttonTextColor' => '#ffffff',
					'buttonBorderRadius' => '3',
					'buttonFontSize' => '15',
					'buttonFontType' => 'Lucida Grande',
					'buttonBorderColor' => '#29447e',
					'buttonHorizontalPadding' => '6',
					'buttonVerticalPadding' => '6',
				),
			);
			if (isset($premade_style_options)) {
				foreach ($premade_style_options as $i=>$s) {
					echo "<option value='$i'>$s</option>";
				}
			}
			?>
			</select>
			<script type="text/javascript">
			jQuery(document).ready(function ($) {
		$('#customStyle').change(function () {
		if ($(this).val() != 'custom') {
		var self = $('.barskin');
		$scope = angular.element(self).scope();
		<?php foreach ($premade_styles as $name=>$style) { ?>
			if ($(this).val() == <?php echo "'$name'" ?>) {
				<?php
					foreach($style as $o=>$v) {
						echo '$scope.' . $o . " = '$v';";
					}
				?>
				
			}
		<?php } ?>
		$scope.$apply(function () {
			$scope.barHeight = $('.barskin').outerHeight();
			$scope.bgStyle = "background-color:"+$scope.bgTopColor+";background-image: -webkit-gradient(linear, left top, left bottom, from("+$scope.bgTopColor+"), to("+$scope.bgBottomColor+"));background-image:-moz-linear-gradient(top, "+$scope.bgTopColor+" 0%, "+$scope.bgBottomColor+");background-image:-webkit-linear-gradient(top, "+$scope.bgTopColor+" 0%,"+$scope.bgBottomColor+");background-image:-ms-linear-gradient(top, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");background-image:-o-linear-gradient(top, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");background-image:linear-gradient(to bottom, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");";
		});
		}
		});		
		
				});
				
			</script>
				</div>
			</div>
	</div>
			<?php
		}
		?>
		</div> <!-- .tab-pane -->
	<?php } ?> </div> <!-- .tab-content -->
<?php } ?>

</div>
<div class="clearfix"></div>
</div>
</div>
<div class="pull-right">
<button class=" btn btn-lg btn-default" style="margin-top:20px;"><span class="glyphicon glyphicon-check" style="margin-right:5px;"></span> Save Bar</button>
</div>
</form>
</div>
</div>
</div>


  <!-- Modal -->
  <div class="modal fade" id="leaveConfirm" tabindex="-1" role="dialog" aria-labelledby="leaveConfirmLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Confirm to Leave Page</h4>
        </div>
        <div class="modal-body">
          Are you sure that you want to leave this page? 
          <div style="padding-top:2px;"><strong>You must save all changes to your bar for it to be updated.</strong></div>
        </div>
        <div class="modal-footer">
          <button type="button" id="haveSaved" class="btn btn-default">I have saved and I want to leave!</button>
          <button type="button" id="stillSave" data-dismiss="modal" class="btn btn-primary">I still need to save!</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
 
  
<script>
jQuery(document).ready(function($){
	var hasSaved = true;
	var link = '#';
	$('#optionsList input, #optionsList select').click(function () {
		hasSaved = false;
	});
	$('#leaveConfirm').modal({
		show: false,
	});
	$('#primaryNav a, #header a, #footer a').click(function(e) {
		if (!hasSaved) {
			e.preventDefault();
			link = $(this).attr('href');
			$('#leaveConfirm').modal('show');
		}
	});
	
	$('#haveSaved').click(function() {
		window.location.href = link;
	});
	
	$('.colorpicker-hide').click(function (e) {
		e.preventDefault();
		var model = $(this).attr('data-model');
		$('input[name="' + model + '"]').iris('hide');
		$('#open-picker-' + model).hide();
		$('#colorpicker-hide-' + model).hide();
	});
	$('.color-picker').click(function (e) {
		var model = $(this).attr('ng-model');
		$('#colorpicker-hide-' + model).show();
		$('#open-picker-' + model).show();
		$(this).iris('show');
	});
	
    $('.color-picker').each(function (){
    	var model = $(this).attr('ng-model');
    	var initialColor = $(this).val();
	    $(this).iris({
	    	color: initialColor,
		    hide: true,
		    target: false,
		    change: function (event, ui) {
				var scope = angular.element($(this)).scope();
				var color = ui.color.toString().substr(1);
				scope[model] = $(this).val();
				if ($(this).hasClass('gradient')) {
					scope['bgTopColor'] = $('input[name="bgTopColor"]').val();
					scope['bgBottomColor'] = $('input[name="bgBottomColor"]').val();
					$scope.bgStyle = "background-color:"+$scope.bgTopColor+";background-image: -webkit-gradient(linear, left top, left bottom, from("+$scope.bgTopColor+"), to("+$scope.bgBottomColor+"));background-image:-moz-linear-gradient(top, "+$scope.bgTopColor+" 0%, "+$scope.bgBottomColor+");background-image:-webkit-linear-gradient(top, "+$scope.bgTopColor+" 0%, "+$scope.bgBottomColor+");background-image:-ms-linear-gradient(top, "+$scope.bgTopColor+", #"+$scope.bgBottomColor+");background-image:-o-linear-gradient(top, "+$scope.bgTopColor+", #"+$scope.bgBottomColor+");background-image:linear-gradient(to bottom, "+$scope.bgTopColor+", "+$scope.bgBottomColor+");";
				}	
				scope.$apply();
			},
	    });

    });
   });
</script>